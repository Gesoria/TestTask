#OrderFilterAPI

## Основной функционал

Приложение позволяет фильтровать заказы в зависимости от района и времени доставки. Приложение поддерживает операцию логирования и сохранения логов в базу данных, а также позволяет сохранять выборку в базе данных. 

## Дополнительный функционал

В приложении можно добавлять районы и заказы в базу данных, а так же получать первый заказ на нужную дату.

## Дополнительно

В приложении есть TempAddObjects. Данный контроллер был нужен для заполнения данных.

----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

## Стек технологий

- **.NET 8**
- **Entity Framework Core** — для работы с базой данных
- **SQLite** - база данных
- **ASP.NET Core Web API** — для создания REST API
- **Swagger** — для тестирования и документирования API

----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

## Эндпоинты API

### 1. Заказы

#### Получить заказы по фильтру доставки

- **URL**: `/OrderFilter/get-orders-by-first-delivery-dateTime-30min`
- **Метод**: `GET`
- **Параметры**:
  - `cityDistrictId` (int): ID района.
  - `firstDeliveryDateTime` (string): Время первой доставки в формате `yyyy-MM-dd HH:mm:ss`.
- **Описание**: Возвращает список заказов в указанном районе в течение ближайших 30 минут после `firstDeliveryDateTime`.

#### Добавить заказ

- **URL**: `/Order/add-order`
- **Метод**: `POST`
- **Тело запроса**:
    ```json
  {
  "cityDistrictId": int,
  "weight": double,
  "deliveryDateTime": "2024-10-30T15:06:27.666Z"
  }
    ```
- **Описание**: Добавляет новый заказ в систему с указанными параметрами. Если время заказа не указано - добавляет заказ с текущим временем.

#### Получить первый заказ дня

- **URL**: `/Order/get-first-order-of-day`
- **Метод**: `GET`
- **Параметры**:
  - `cityDistrictId` (int): ID района.
  - `firstDeliveryDateTime` (string): Дата предпологаемой доставки в формате `yyyy-MM-dd`.
- **Описание**: Возвращает первый заказ дня на запрашиваемую дату.

  
#### Добавить район

- **URL**: `/CityDistrict/add-district`
- **Метод**: `POST`
- **Тело запроса**:
    ```json
  {
  "name": "string"
  }
    ```
- **Описание**: Добавляет новый район в систему с указанным именем.

----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

## Структура БД

- **CityDistricts** - таблица районов.
- **Orders** - таблица заказов.
- **DeliveryLogs** - таблица с логами.
- **DeliveryOrders** - результирующая таблица.
- **DeliveryOrdersWithOrders** - промежуточная таблица для сохранения списка отфильтрованных заказов.

